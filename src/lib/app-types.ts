
// Renaming types.ts to app-types.ts to avoid conflict with native TS types
// And to specifically denote application-level type definitions.
import type { Timestamp } from 'firebase/firestore';

// Data displayed ON a staff member's card
export interface StaffCardData {
  name: string;
  title: string;
  companyName?: string; // Company name on the card
  phone?: string;
  email: string;
  website?: string;
  linkedin?: string;
  twitter?: string;
  github?: string;
  address?: string;
  profilePictureUrl?: string; // Can be dataURI or external URL
  cardBackgroundUrl?: string; // Can be dataURI or external URL
  userInfo?: string; // For AI assistant and "About Me" on card
  targetAudience?: string; // For AI assistant
}

export interface CardDesignSettings {
  template: 'classic' | 'modern' | 'minimalist'; // Example templates
  layout: 'image-left' | 'image-right' | 'image-top';
  colorScheme: {
    cardBackground: string;
    textColor: string;
    primaryColor: string;
  };
  qrCodeUrl: string; // Generated based on fingerprintUrl for public card
}

// Represents an Organization/Company in Firebase
export interface CompanyProfile {
  id: string; // companyId
  name: string;
  industry?: string;
  size?: string;
  website?: string;
  address?: string;
  createdAt: Timestamp | string;
  updatedAt: Timestamp | string;
}

// Represents an Admin User in Firebase
export type AdminRole = 'Owner' | 'Admin' | 'BillingManager';
export type UserStatus = 'Active' | 'Invited' | 'Inactive';

export interface AdminUser {
  id: string; // adminId (usually user.uid)
  companyId: string;
  companyName?: string; // For convenience
  name: string;
  email: string;
  emailVerified?: boolean;
  role: AdminRole;
  status: UserStatus;
  profilePictureUrl?: string;
  lastLoginAt?: Timestamp | string;
  createdAt: Timestamp | string;
  updatedAt?: Timestamp | string;
}

// Represents a Staff Record in Firebase (managed by Admins, no login access)
export type StaffRole = 'Employee' | 'Manager' | 'Contractor';
export interface StaffRecord {
  id: string; // staffId (auto-generated by Firestore)
  name: string;
  email: string;
  role: StaffRole;
  teamId?: string; // ID of the team they belong to
  status: UserStatus;
  fingerprintUrl: string; // Unique, admin-settable URL slug for the public card
  uniqueNfcIdentifier?: string; // For NFC card hardware
  // Card specific data and design is now part of StaffRecord
  cardDisplayData: StaffCardData;
  designSettings: CardDesignSettings;
  // --
  cardsCreatedCount?: number; // This might be deprecated if one staff = one card
  lastLoginAt?: Timestamp | string; // Likely not relevant for staff not logging in
  createdAt: Timestamp | string;
  updatedAt?: Timestamp | string;
}


// Represents a Digital Business Card record in Firebase - THIS MIGHT BE MERGED/REPLACED
// If each StaffRecord essentially IS a card, this separate entity might not be needed
// unless you want multiple card versions per staff, or cards unlinked to staff.
// For now, assuming StaffRecord holds the card data directly.
export interface DigitalBusinessCardRecord {
  id: string; // cardId
  staffRecordId: string; // Link to the StaffRecord
  // companyId is implicit via staffRecord
  // templateId?: string; // Could reference a CardTemplateRecord
  // customFields?: Record<string, any>; // No longer needed if all in StaffCardData
  // cardData: StaffCardData; // Now part of StaffRecord
  // designSettings: CardDesignSettings; // Now part of StaffRecord
  isActive: boolean;
  nfcTagId?: string; // Link to a physical NFC tag
  createdAt: Timestamp | string;
  updatedAt: Timestamp | string;
}

// Represents a Card Template record in Firebase
export interface CardTemplateRecord {
  id: string; // templateId
  // companyId is implicit
  name: string;
  description?: string;
  designSettings: CardDesignSettings; // The design settings of the template
  defaultCardDisplayData: Partial<StaffCardData>; // Default profile fields for this template
  isDefaultCompanyTemplate?: boolean; // Is this the default for new staff in the company?
  createdAt: Timestamp | string;
  updatedAt: Timestamp | string;
}

export interface AccessCode {
    code: string;
    userId: string; // StaffId this code is for
    companyId: string;
    isUsed: boolean;
    expiresAt?: Timestamp | string;
    createdAt: Timestamp | string;
}

// AppTemplate is no longer used for initializing the editor with multiple options
// It's removed to avoid mock data dependency.

export const defaultStaffCardData: StaffCardData = {
  name: '',
  title: '',
  companyName: '',
  phone: '',
  email: '',
  website: '',
  linkedin: '',
  twitter: '',
  github: '',
  address: '',
  profilePictureUrl: '',
  cardBackgroundUrl: '',
  userInfo: '',
  targetAudience: '',
};

export const defaultCardDesignSettings: CardDesignSettings = {
  template: 'classic',
  layout: 'image-left',
  colorScheme: {
    cardBackground: '#FFFFFF',
    textColor: '#333333',
    primaryColor: '#3F51B5',
  },
  qrCodeUrl: '', // Will be generated based on staff's fingerprintUrl
};

// For Dashboard Teams list
export interface Team {
  id: string;
  name: string;
  description: string;
  memberUserIds?: string[];
  managerId?: string; // ID of the manager (StaffRecord ID)
  managerName?: string; // Name of the manager (denormalized for display)
  memberCount: number;
  defaultTemplateId?: string;
  createdAt?: Timestamp | string;
  updatedAt?: Timestamp | string;
}

// For Contact Collection on Public Card
export interface ContactInfo {
  id: string;
  name: string;
  email: string;
  phone?: string;
  company?: string;
  message?: string;
  submittedFromCardId?: string; // fingerprintUrl of the card it was submitted from
  submittedAt: Timestamp | string; // ISO string or Firestore Timestamp
}
    